<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab Utilization Dashboard</title>
    <!-- PERBAIKAN: Menggunakan url_for untuk semua file statis -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/nav.css') }}">
</head>
<body>
    
    <div class="header">
        <div class="header-left">
            <img src="{{ url_for('static', filename='New-SU-Logo-PNG_White.png') }}" alt="Logo" class="logo">
        </div>
        <div class="header-middle">
            <h1>Dashboard</h1>
        </div>
        <div class="header-right">
            <a href="{{ url_for('dashboard') }}">Home</a>
            <a href="{{ url_for('booking_form') }}">Booking</a>
            <a href="{{ url_for('equipment_booking_form') }}">Equipment</a>
            <a href="{{ url_for('scan_qr') }}">Scan QR</a>
            <a href="{{ url_for('login') }}">Login</a>
            <button class="hamburger" onclick="toggleDrawer()">â˜°</button>
            <div class="drawer" id="drawer">
                <a href="{{ url_for('dashboard') }}">Home</a>
                <a href="{{ url_for('booking_form') }}">Booking</a>
                <a href="{{ url_for('equipment_booking_form') }}">Equipment</a>
                <a href="{{ url_for('scan_qr') }}">Scan QR</a>
                <a href="{{ url_for('login') }}">Login</a>
            </div>
        </div>
        
    </div>

    <div class="container">
        <div class="row">
            <div class="widget full-width">
                <h2>Current Lab Status</h2>
                <div id="current-status" class="status-free">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="widget full-width">
                <h2>Booking Calendar</h2>
                <div id="bookingCalendar"></div>
            </div>
        </div>
        <div class="row">
            <div class="widget">
                <h2>Booking Purpose Distribution</h2>
                <div class="chart-container">
                    <canvas id="purposeChart"></canvas>
                </div>
            </div>
            <div class="widget">
                <h2>Daily Booking Distribution</h2>
                <div class="chart-container">
                    <canvas id="dailyChart"></canvas>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="widget full-width">
                <h2>Peak Hours Analysis</h2>
                <div class="chart-container-large">
                     <canvas id="hourlyChart"></canvas>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="widget full-width">
                <h2>Recent Completed Bookings</h2>
                <div class="table-container">
                    <table id="bookingTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Date</th>
                                <th>Time</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- PERBAIKAN: Menggunakan url_for untuk file JavaScript -->
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    <script>
        function toggleDrawer() {
            document.getElementById('drawer').classList.toggle('open');
        }
        
        // Close drawer when clicking outside
        document.addEventListener('click', function(event) {
            const drawer = document.getElementById('drawer');
            const hamburger = document.querySelector('.hamburger');
            if (drawer.classList.contains('open') && !drawer.contains(event.target) && !hamburger.contains(event.target)) {
                drawer.classList.remove('open');
            }
        });
    </script>
</body>
</html>